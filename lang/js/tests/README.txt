// Tests for
// JavaScript GDP access application programs and support libraries
//
// Alec Dara-Abrams
// 2014-11-04

// Bash script for testing apps/writer-test.js and apps/reader-test.js .
// Should also provide some examples of running these Node.js JS GDP apps.
// See writer_reader-test.js_tests.sh below.
//
// Use "make run" to run the tests.
//
// Currently, some GDP API documentation is available at:
// https://docs.google.com/document/d/1MdJ47NEfUQdJlTyAXwotZp8aJbXchRIi3VgwOz4LWuU/edit?usp=sharing 
//

// Notes:
//
//   The result of the tests are some diffs which must be examined by
//   the user of the test.  Currently, there is no summary Yes or No
//   overall result -- see the Note just below.
//
//   There are issues with, evidently, how Node.js JS program text
//   output can be ordered differently for output to a terminal and
//   output to a file.  This results in, very likely, spurious
//   differences showing up in the tests, in particular, for
//   the tests of reader-test.js -s (the subscribe option).
//   This behaviour can be different from test run to test run.
//   This issue is discussed in the script.
//   TBD: diagnose and fix this if possible.
//
//   There are also some local tests of the JS and C support routines in
//   the apps/ directory.
//
// Also Note:
//   Shell scripts can be brittle and sensitive to execution context.
//   Let us know about any issues.


// ===================================================================
Makefile

Currently, does not build anything.  Use "make run" to run the tests.


// ===================================================================
README.txt
This file.  


// ===================================================================
wr-test_01_Winput.txt
wr-test_02_Winput.txt

Input files for testing writer-test.js .
They are needed to run the tests and are generated manually.


// ===================================================================
wr-test_01_Routput_Good.txt
wr-test_01_Woutput_Good.txt
wr-test_02_RALLoutput_Good.txt
wr-test_02_RSUBoutput_Good.txt
wr-test_02_WAPPoutput_Good.txt

Know good reader-test and writer-test output files for test script
comparison purposes (using diff).
They are needed to run the tests and are generated manually.


// ===================================================================
wr-test_01_Routput.tmp
wr-test_01_Woutput.tmp
wr-test_02_RALLoutput.tmp
wr-test_02_RSUBoutput.tmp
wr-test_02_WAPPoutput.tmp

Temporary output files for intemediate test results.  Regenerated by
each run of the test script.  Removed by "make clean".


// ===================================================================
writer_reader-test.js_tests.sh

The test script (bash) itself.
This script should be run in directory gdp/lang/js/tests/ .
See file name and path constants defined in the script for other
dependencies.  Note, a gdp_router and gdplogd MUST be running.

Simple example:
cd .......gdp/lang/js/tests/
writer_reader-test.js_tests.sh
[[ a screen and a half of output -- look for the diffs marked with
   >>>>>>>>> ]]

// ===================================================================
writer_reader-test.js_tests.sh_sample.output

An example of the output of writer_reader-test.js_tests.sh .  Includes
spurious reader-test -s differences.


// ===================================================================

